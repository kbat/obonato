<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="example.conference">
  <body>

    <metal:main fill-slot="main">
      <tal:main-macro metal:define-macro="main" >

        <div tal:replace="structure provider:plone.abovecontenttitle" />

        <h1 class="documentFirstHeading" tal:content="context/title" />

        <div tal:replace="structure provider:plone.belowcontenttitle" />

        <p class="documentDescription" tal:content="context/description" />

        <div tal:replace="structure provider:plone.abovecontentbody" />

	<div class="discreet" align="right">Repository: <a tal:attributes="href context/url"><span tal:replace="context/url"></a></div>

	<div>
	  <tal:block repeat="component view/components">
	    <div class="photoAlbumEntry"
		 tal:define="obj component/getObject; image nocall:obj/image;
			     scale_func obj/@@images;
			     scaled_image python: getattr(obj.aq_explicit, 'image', False) and scale_func.scale('image', scale='large', direction='up')"
		 tal:condition="nocall:image">
	      <figure tal:condition="python: scaled_image">
		<a tal:attributes="href obj/@@plone_context_state/object_url; title obj/Description">
		  <img tal:replace="structure python: scaled_image.tag(css_class='photoAlbumEntryWrapper')" />
		</a>
		<figcaption tal:content="obj/title" />
	      </figure>
	    </div>
	  </tal:block>
	</div>

        <div tal:replace="structure provider:plone.belowcontentbody" />

      </tal:main-macro>
    </metal:main>

  </body>
</html>
